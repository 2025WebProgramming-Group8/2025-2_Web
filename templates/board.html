{% extends 'base.html' %} 
{% block title %}ê²Œì‹œíŒ{% endblock %}

{% block header_content %}
    <header class="head">
        <h1 class="title">ê²Œì‹œíŒ</h1>
    </header>
{% endblock %}

{% block content %}
<style>
    :root{ --bg:#0e0f13; --panel:#161821; --ink:#e9eaf3; --muted:#a4a7b8; --line:#232637; --accent:#93b2ff; --card:#1b1e2a; }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ margin:0; background:var(--bg); color:var(--ink); font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif; }
    a{ color:inherit; text-decoration:none }

    /* Page Title */
    .head{ max-width:900px; margin:32px auto 16px; padding:0 20px }
    .title{ font-size:28px; font-weight:900; margin:0 0 10px }

    /* Search */
    .search{ max-width:900px; margin:0 auto 22px; padding:0 20px }
    .search input{ width:100%; background:var(--panel); border:1px solid var(--line); color:var(--ink); border-radius:14px; padding:14px 16px; font-size:15px }
    .search input::placeholder{ color:var(--muted) }

    /* Study list with CTA */
    .list{ max-width:900px; margin:0 auto 40px; padding:0 20px; display:grid; grid-template-columns:1fr 120px; gap:12px }
    
    .cell{ background:var(--panel); border:1px solid var(--line); border-radius:12px; min-height:60px; display:flex; align-items:center; justify-content:center; padding:12px 16px }
    
    /* ğŸ“Œ [ìˆ˜ì •ë¨] ì œëª©+ì„¤ëª…ê¸€ì„ ì„¸ë¡œë¡œ ë°°ì¹˜í•˜ê¸° ìœ„í•œ ìŠ¤íƒ€ì¼ */
    .cell.name { 
        justify-content: center; 
        align-items: flex-start; /* ì™¼ìª½ ì •ë ¬ */
        flex-direction: column;  /* ìœ„ì•„ë˜ ë°°ì¹˜ */
        gap: 4px;                /* ì œëª©ê³¼ ì„¤ëª… ì‚¬ì´ ê°„ê²© */
    }
    
    /* ğŸ“Œ [ì¶”ê°€ë¨] ì œëª© ìŠ¤íƒ€ì¼ */
    .group-title {
        font-weight: 700;
        font-size: 16px;
    }

    /* ğŸ“Œ [ì¶”ê°€ë¨] ì„¤ëª…ê¸€ ìŠ¤íƒ€ì¼ (íšŒìƒ‰, ì‘ì€ ê¸€ì”¨) */
    .group-desc {
        font-size: 13px;
        color: var(--muted);
        font-weight: 400;
        /* ê¸´ ê¸€ìëŠ” ë§ì¤„ì„í‘œ(...) ì²˜ë¦¬ */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }

    .cell.cta{ background:#1b1e29; cursor:pointer }
    .cell.cta:hover{ outline:2px solid #2a2f47 }

    /* Create button */
    .create-wrap{ max-width:900px; margin:10px auto 30px; padding:0 20px; display:flex; justify-content:flex-end }
    .create{ background:var(--accent); color:#0b0c12; font-weight:800; border:none; border-radius:14px; padding:12px 16px; cursor:pointer }

    /* Responsive */
    @media (max-width:700px){
      .list{ grid-template-columns:1fr 96px }
    }
</style>

    <div class="search">
        <form method="get" action="{% url 'board' %}">
            <input 
                type="text" 
                name="q" 
                placeholder="ê³¼ëª©ëª…, ê·¸ë£¹ëª…, ëª©í‘œë¡œ ê²€ìƒ‰" 
                aria-label="ìŠ¤í„°ë”” ê²€ìƒ‰"
                value="{{ request.GET.q|default:'' }}"
            />
        </form>
    </div>

    <section class="list" aria-label="ìŠ¤í„°ë”” ê·¸ë£¹ ëª©ë¡">
        
        {% if groups %}
            {% for group in groups %}
            <div class="cell name">
                <div class="group-title">
                    [{{ group.subject }}] {{ group.name }}
                </div>
                
                {% if group.description %}
                    <div class="group-desc">
                        {{ group.description|truncatechars:40 }}
                    </div>
                {% endif %}
            </div>

            <div class="cell cta">
                <a href="{% url 'timer' group_code=group.group_code %}">ë“¤ì–´ê°€ê¸°</a>
            </div>
            {% endfor %}
            
        {% else %}
            <div class="cell name" style="grid-column: 1 / -1; justify-content: center; color: gray; align-items: center;">
                ì•„ì§ ê°œì„¤ëœ ìŠ¤í„°ë””ê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
        {% endif %}

    </section>

    <div class="create-wrap">
        <a href="{% url 'create_study' %}" class="create" aria-label="ìŠ¤í„°ë”” ê°œì„¤í•˜ê¸°">ìŠ¤í„°ë”” ê°œì„¤í•˜ê¸°</a>
    </div>
{% endblock %}