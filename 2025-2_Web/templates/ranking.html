{% extends 'base.html' %} 
{% block title %}랭킹{% endblock %}

{% block header_content %}
    <header class="head">
      <h1 class="title">랭킹</h1>
      <p class="subtitle">금주의 랭킹</p>
    </header>
{% endblock %}

{% block content %}
<style>
    :root{
      --bg:#0e0f13; --panel:#161821; --ink:#e9eaf3; --muted:#a4a7b8; --line:#232637; --accent:#93b2ff; --card:#1b1e2a;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;}
    a{color:inherit;text-decoration:none}

    /* Page head */
    .head{max-width:900px;margin:32px auto 16px;padding:0 20px}
    .title{font-size:28px;font-weight:900;margin:0 0 10px}
    .subtitle{font-size:14px;color:var(--muted);margin:0;border-top:1px solid var(--line);padding-top:10px}

    /* Podium */
    .podium{max-width:900px;margin:20px auto;display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px;padding:0 20px}
    .tile{background:var(--card);border:1px solid var(--line);border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:18px;min-height:160px}
    .tile h3{margin:0 0 6px;font-size:14px;color:var(--muted);font-weight:700;letter-spacing:.4px}
    .tile .name{font-weight:900;font-size:20px;margin:6px 0}
    .tile .hours{font-size:13px;color:var(--muted)}
    .rank-1{min-height:220px}
    .rank-2{min-height:180px}
    .rank-3{min-height:150px}

    /* List 4~8 */
    .list{max-width:700px;margin:24px auto 60px;padding:0 20px;display:grid;grid-template-columns:1fr 120px;gap:12px}
    .cell{background:var(--panel);border:1px solid var(--line);border-radius:12px;min-height:44px;display:flex;align-items:center;justify-content:center;padding:10px 12px}
    .cell.left{justify-content:flex-start;padding-left:16px;font-weight:700}
    .cell.right{color:var(--muted)}
    .cell.empty{background:transparent;border:1px dashed #2a2d3e;color:transparent}

    @media (max-width:700px){
      .podium{grid-template-columns:1fr}
      .rank-1,.rank-2,.rank-3{min-height:140px}
      .list{grid-template-columns:1fr 96px}
    }
</style>

    <section class="podium" aria-label="Top 3 Podium">
      
      <article class="tile rank-2">
        <h3>2등</h3>
        {% if rankers.1 %}
            <div class="name">{{ rankers.1.nickname|default:rankers.1.user.username }}</div>
            <div class="hours">{{ rankers.1.total_study_time }}</div>
        {% else %}
            <div class="name" style="color:var(--muted); font-weight:normal;">-</div>
            <div class="hours">-</div>
        {% endif %}
      </article>
      
      <article class="tile rank-1">
        <h3>1등</h3>
        {% if rankers.0 %}
            <div class="name">{{ rankers.0.nickname|default:rankers.0.user.username }}</div>
            <div class="hours">{{ rankers.0.total_study_time }}</div>
        {% else %}
            <div class="name" style="color:var(--muted); font-weight:normal;">아직 1등이<br>없습니다</div>
            <div class="hours"></div>
        {% endif %}
      </article>
      
      <article class="tile rank-3">
        <h3>3등</h3>
        {% if rankers.2 %}
            <div class="name">{{ rankers.2.nickname|default:rankers.2.user.username }}</div>
            <div class="hours">{{ rankers.2.total_study_time }}</div>
        {% else %}
            <div class="name" style="color:var(--muted); font-weight:normal;">-</div>
            <div class="hours">-</div>
        {% endif %}
      </article>
    </section>

    <section class="list" aria-label="4위부터 8위">
        {% for ranker in rankers|slice:"3:" %}
            <div class="cell left">{{ forloop.counter|add:3 }}등 {{ ranker.nickname|default:ranker.user.username }}</div>
            <div class="cell right">{{ ranker.total_study_time }}</div>
        {% empty %}
            <div class="cell empty" style="justify-content: center; color: gray;">
                순위권 외 유저가 없습니다.
            </div>
        {% endfor %}
    </section>
{% endblock %}